<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Projetos e Github no R üì¶</title>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <script src="libs/header-attrs-2.13/header-attrs.js"></script>
    <link rel="stylesheet" href="css/xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Projetos e Github no R üì¶
## Athos Petri Damiani
### <img src = 'https://jedis.asn.rocks/pluginfile.php/1/theme_edumy/headerlogo1/1604959123/ASN_Logo_Site_Vertical%20-%20Copy1.png' width = '20%'>
### Outubro de 2022

---




# Sum√°rio

1. Preparando o ambiente de desenvolvimento

1. Projetos + Git e Github

1. Github Pages

1. Github Actions

---
# Refer√™ncias  e materiais para estudo

- [R Packages](https://r-pkgs.org), livro aprofundado sobre desenvolvimento de pacotes.

- [R for Data Science - cap√≠tulo sobre Func√µes](https://r4ds.had.co.nz/functions.html)

- [Zen do R](https://curso-r.github.io/zen-do-r/), livro em desenvolvimento pela Curso-R.

- [Materiais da R-Ladies SP sobre a Hacktoberfest 2020](https://r-ladies-sao-paulo.github.io/2020-hacktoberfest/).

- [Folha de dicas do Git em Portugu√™s](https://training.github.com/downloads/pt_BR/github-git-cheat-sheet/)

---
class: middle, center, inverse
# Preparando o ambiente de desenvolvimento

---
class: middle, center, inverse
# Projetos em R

---
# Projetos em R


```r
usethis::create_project("meuProjeto")
```

- Uma nova pasta chamada "meuProjeto" ser√° criada.

O arquivo `meupacote.Rproj` faz com que esta pasta seja a pasta padr√£o (ser√° o `working directory`).

- *Working directory* √© a pasta em que o R vai procurar arquivos na hora de ler informa√ß√µes ou gravar arquivos na hora de salvar objetos.

- `getwd()` informa o caminho do seu diret√≥rio de trabalho.

Fixar o diret√≥rio de trabalho como a pasta raiz do projeto garante que sua an√°lise poder√° ser executada por qualquer pessoa e em qualquer computador sem a preocupa√ß√£o de ajustar caminhos at√© os arquivos utilizados ou criados pelo seu c√≥digo.


---

# Projetos em R: Exerc√≠cio

1. Reposit√≥rio: Criar projeto `usethis::create_project("meuProjeto")`

2. Adicionar Git `usethis::use_git()`

3. Adicionar GitHub `usethis::use_github()`

3. Adicionar README.md `usethis::use_readme_rmd()`

4. Commit: Edite e "commit" as mudan√ßas no c√≥digo 

5. Push: Suba os commits para o GitHub


---
# Fluxo de trabalho

O diagrama abaixo exemplifica o fluxo de trabalho de um projeto com versionamento.


&lt;img src="img/fluxo_github_rstudio.png" width="70%" style="display: block; margin: auto;" /&gt;

---
# {usethis}

O pacote `{usethis}` ajuda com todo o fluxo de desenvolvimento em R. Ele ajuda a criar arquivos, projetos, usar o Git, criar reposit√≥rios no GitHub e muito mais.

Fun√ß√µes frequentes:


```r
usethis::create_project()
usethis::use_git()
usethis::use_github()
usethis::git_sitrep()
usethis::use_r()
usethis::edit_r_environ()
usethis::use_readme_rmd()
```


---
class: middle, center, inverse
# Git e GitHub

---
# Git

- Git √© um **sistema de versionamento**, criado por Linus Torvalds, autor do Linux.

- √â capaz de guardar o hist√≥rico de altera√ß√µes de todos os arquivos dentro de uma pasta, que chamamos de reposit√≥rio.

- Funciona como o "*Track changes*" do word, mas muito melhor.

- Torna-se importante √† medida que seu trabalho √© __colaborativo__.

- Git √© um software que voc√™ instala no computador.

- Arquivo `.gitignore`: Lista arquivos que dever√£o ser ignorados ao versionar o pacote com Git. 

&lt;br&gt;

&lt;img src="img/git.png" width="30%" style="display: block; margin: auto;" /&gt;

---
# GitHub

- GitHub √© um site onde voc√™ coloca e compartilha reposit√≥rios Git.

- Utilizado por milh√µes de pessoas em projetos de c√≥digo aberto ou fechado.

- √ötil para colaborar com outros programadores em projetos de ci√™ncia de dados.

- Existem alternativas, como [GitLab](https://about.gitlab.com/) e [BitBucket](https://bitbucket.org/product).

- GitHub √© um site que voc√™ acessa na internet.

&lt;br&gt;

&lt;img src="img/github.png" width="40%" style="display: block; margin: auto;" /&gt;

---
# Pacotes e GitHub



.pull-left[


Pacotes do R e reposit√≥rios do GitHub s√£o melhores amigos



&lt;br&gt;

O grande cupido dessa amizade √© o `{usethis}` &lt;br&gt;

Ap√≥s deixar o pacote no GitHub, outras pessoas poder√£o instal√°-lo usando a fun√ß√£o `remotes::install_github("org/repo")`
]

.pull-right[

&lt;img src="img/hug.gif" width="90%" style="display: block; margin: auto;" /&gt;

]


---
# Fluxo de trabalho

O diagrama abaixo exemplifica o fluxo de trabalho de um projeto com versionamento.


&lt;img src="img/fluxo_github_rstudio.png" width="70%" style="display: block; margin: auto;" /&gt;



---
# Configurando o Git e GitHub no RStudio 


.pull-left[

####  Usando protocolo https

- ‚¨ú Ter o pacote `usethis` instalado 

- ‚¨ú Se apresentar para o `git` 

- ‚¨ú Criar um GitHub Token/PAT

- ‚¨ú Armazenar o GitHub Token/PAT 

- ‚¨ú Reiniciar o RStudio
]

.pull-right[
#### Usando protocolo ssh

- ‚¨ú Todas as etapas para o protocolo https (listadas ao lado)

- ‚¨ú Criar as chaves SSH no RStudio

- ‚¨ú Adicionar a chave ssh no ssh-agent

- ‚¨ú Adicionar as chaves p√∫blicas no  GitHub

- ‚¨ú Alterar o protocolo padr√£o no arquivo `.Rprofile`

- ‚¨ú Reiniciar o RStudio



Obs: Se voc√™ utiliza Linux, recomendamos usar `ssh`.

]

---

# Configure seu usu√°rio do Git

Antes de come√ßarmos a versionar o c√≥digo do nosso pacote, vamos configurar o Git e o GitHub no RStudio. 

Esse processo precisa ser feito apenas uma vez!


```r
usethis::use_git_config(
  user.name = "SEU NOME NO GITHUB",
  user.email = "seu_email_no@github.com"
)
```

- Em `user.name`, pode ser seu nome mesmo, n√£o precisa ser o nickname.

- O `user.email` precisa ser o que est√° vinculado √† sua conta do GitHub.

---

# Configure o Personal Access Token 

- Ao conectar com o GitHub, voc√™ ser√° instru√≠da(o) a criar um *Personal Access Token* (PAT).

- O PAT serve para autenticar ao GitHub, podendo ser utilizado como senha de acesso ou internamente para automatizar tarefas (como criar um reposit√≥rio).

- Para criar um novo PAT, use a fun√ß√£o `usethis::create_github_token()`. Uma janela do navegador ser√° aberta, e voc√™ deve autenticar no GitHub (se necess√°rio), criar o novo token, e copi√°-lo. 


```r
usethis::create_github_token()
```


---

# Armazenar o Personal Access Token 

#### M√©todo 1 - `gitcreds::gitcreds_set()`


.pull-left[

```r
gitcreds::gitcreds_set()
# -&gt; Your current credentials for 'https://github.com':
#   protocol: https
#   host    : github.com
#   username: beatrizmilz
#   password: &lt;-- hidden --&gt;
#     
# -&gt; What would you like to do? 
# 1: Keep these credentials
# 2: Replace these credentials
# 3: See the password / token
```
]


.pull-right[
Siga as instru√ß√µes e cole o PAT quando for solicitado as credenciais.


```r
# -&gt; Adding new credentials...
# -&gt; Removing credetials from cache...
# -&gt; Done.
```
]




---

# Armazenar o Personal Access Token 

#### M√©todo 2 - Armazenar manualmente no `.Renviron`

- Use a fun√ß√£o `usethis::edit_r_environ()` para abrir o arquivo `.Renviron` para salvar seu token. 


```r
usethis::edit_r_environ()
# ‚óè Modify 'C:/Users/beatr/Documents/.Renviron'
# ‚óè Restart R for changes to take effect
```

- Crie uma nova linha na forma `GITHUB_PAT=SEU_TOKEN`, adicione o token, **pule uma linha** e salve o arquivo. Se certifique que o arquivo termina com uma linha vazia!


Use essa estrutura, substituindo os 0 pelo c√≥digo copiado na etapa anterior:


```r
GITHUB_PAT="0000000000000000000000000000000000000000"
```




---

# Checando se a configura√ß√£o deu certo


- Lembre-se de reiniciar sua sess√£o do R!
  - **Reinicie o R usando o RStudio**:  CTRL + SHIFT + F10

- Utilize a fun√ß√£o `usethis::git_sitrep()` e leia o resultado que aparece no console. A mensagem abaixo foi cortada para mostrar os trechos de interesse!



```r
usethis::git_sitrep()
#&gt; Git config (global)
#&gt; ‚óè Name: 'SEU NOME DEVE APARECER AQUI'
#&gt; ‚óè Email: 'SEU EMAIL DEVE APARECER AQUI'

#&gt; GitHub
#&gt; ‚óè Default GitHub host: 'https://github.com'
#&gt; ‚óè Personal access token for 'https://github.com': '&lt;discovered&gt;' ***IMPORTANTE ESTAR COMO DISCOVERED***
#&gt; ‚óè GitHub user: 'SEU NOME DE USU√ÅRIO(A) DEVE APARECER AQUI'
#&gt; ‚óè Token scopes: 'gist, repo, user, workflow'
#&gt; ‚óè Email(s): 'SEU EMAIL DEVE APARECER AQUI'
```

---

# Configurando com o SSH (Parte 1)



.pull-left[

- Se voc√™ utiliza Linux, recomendamos usar o protocolo `ssh`.

- Al√©m das etapas anteriores (se apresentar para o `git` e configurar o PAT), √© necess√°rio seguir os seguintes passos: 

** CRIANDO UMA CHAVE SSH**

- No RStudio, clique em `Tools` -&gt; `Global Options...` -&gt; `Git/SVN`. No campo `SSH RSA Key`, clique em `Create RSA Key`.



Refer√™ncia: https://happygitwithr.com/ssh-keys.html 

]

.pull-right[

&lt;img src="img/ssh/etapa-1.png" width="90%" style="display: block; margin: auto;" /&gt;

]




---

# Configurando com o SSH (Parte 2)


.pull-left[

** CRIANDO UMA CHAVE SSH**

- N√£o altere o primeiro campo, mas voc√™ pode adicionar uma senha caso queira. Por√©m voc√™ precisar√° informar essa senha todas as vezes que quiser fazer algumas a√ß√µes como Pull ou Push. Clique em `Create`.

A sua senha ser√° criada e aparecer√° uma caixinha com ela. Pode clicar em `Close`.

Ap√≥s fechar, veja se o campo `SSA RSA KEY` est√° preenchido.

Refer√™ncia: https://happygitwithr.com/ssh-keys.html 

]

.pull-right[


&lt;img src="img/ssh/etapa-2.png" width="90%" style="display: block; margin: auto;" /&gt;

]


---


# Configurando com o SSH (Parte 3)


.pull-left[

**Verificando se o ssh-agent est√° funcionando**





Refer√™ncia: https://happygitwithr.com/ssh-keys.html#add-key-to-ssh-agent

]

.pull-right[

- **Mac OS ou Linux** - no terminal, escreva:

```
eval "$(ssh-agent -s)"
```


- **Windows** - no Git Bash shell, escreva:

```
eval $(ssh-agent -s)
```



&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
A resposta esperada, nessa etapa, √© algo como:
```
Agent pid 14198
```


]



---


# Configurando com o SSH (Parte 4)


.pull-left[

**Adicionando a chave ssh no ssh-agent**

- Se voc√™ definiu uma senha ao criar a chave ssh, ela ser√° solicitada nessa etapa.


- **Linux** - no terminal, escreva:

```
ssh-add ~/.ssh/id_rsa
```


- **Mac OS** - no terminal, escreva:

```
ssh-add -K ~/.ssh/id_rsa
```


- **Windows** - no Git Bash shell, escreva:

```
ssh-add ~/.ssh/id_rsa
```
&lt;br&gt;

Refer√™ncia: https://happygitwithr.com/ssh-keys.html#add-key-to-ssh-agent

]

.pull-right[

A resposta esperada, nessa etapa, √© algo como:
```
Identity added: /home/bea/.ssh/id_rsa
```

&lt;img src="img/ssh/etapa-5.png" width="100%" style="display: block; margin: auto;" /&gt;

]


---


# Configurando com o SSH (Parte 5)



**Adicionando a chave p√∫blica no GitHub**

- No GitHub, v√° em `Settings` -&gt; `SSH and GPG keys` -&gt; `New ssh key` (ou clique aqui: https://github.com/settings/ssh/new )  


- No RStudio, clique em `Tools` -&gt; `Global Options...` -&gt; `Git/SVN`. No campo `SSH RSA Key`, clique em `View Public Key`.

- Uma janela vai abrir com a chave p√∫blica e voc√™ deve copiar o conte√∫do todo.

- No campo `Title`, escreva algo que ajude voc√™ a lembrar em qual computador essa chave est√° sendo usada. No campo `Key`, cole todo o conte√∫do copiado na etapa anterior. Clique em `Add SSH key`.



&lt;br&gt;

Refer√™ncia: https://happygitwithr.com/ssh-keys.html#add-key-to-ssh-agent



---


# Configurando com o SSH (Parte 6)



**Dicas**


- Confira se est√° funcionando executando o seguinte c√≥digo na aba Terminal, no RStudio: 
```
ssh -T git@github.com
```

- Ao clonar um projeto, √© importante utilizar o protocolo que foi configurado. O protocolo padr√£o utilizado pelo usethis √© o `https`. Para alterar para o `ssh` , altere no `.Rprofile` o protocolo padr√£o a ser utilizado: 

  - Abrir o arquivo o `.Rprofile`: 
  
```
usethis::edit_r_profile()
```

  - Adicione a seguinte linha neste arquivo:
  
```
options(usethis.protocol = "ssh")
```

  - Salve o arquivo e reinicie o RStudio.


&lt;br&gt;

Refer√™ncia: https://usethis.r-lib.org/reference/git_protocol.html

---

# Versione com o Git e o GitHub


```r
usethis::use_git()
```

- Rodando o comando acima na pasta do projeto (a nova aba do RStudio que
apareceu) voc√™ adiciona controle de vers√£o.

- Voc√™ receber√° algumas instru√ß√µes para seguir, mas est√° tudo certo.


```r
usethis::use_github()
```

- O comando acima sincroniza a pasta com o GitHub.

- Mais uma vez, voc√™ receber√° algumas instru√ß√µes, mas lembre-se  de alterar para o protocolo `ssh` caso tenha feito a configura√ß√£o usando esse protocolo. Para isso, use o argumento `protocol = ssh`.

---
# Stage &amp; Commit

&lt;img src="img/passo_3_commit_1.gif" width="50%" style="display: block; margin: auto;" /&gt;

- Nesta etapa, voc√™ estar√° descrevendo as modifica√ß√µes que fez nos arquivos selecionados.

- __Observa√ß√£o__: o ato de clicar no item √© o passo de Stage.

---

# Push

&lt;img src="img/passo_4_push.gif" width="50%" style="display: block; margin: auto;" /&gt;

- *Push* (ou *dar push*) significa atualizar o seu reposit√≥rio remoto (GitHub) com os arquivos que voc√™ *commitou* no passo anterior.

---

# Extra: Pull

&lt;img src="img/passo_5_pull.gif" width="50%" style="display: block; margin: auto;" /&gt;

- *Pull* √© a a√ß√£o inversa do *Push*: voc√™ trar√° a vers√£o mais recente dos arquivos do seu reposit√≥rio remoto (GitHub) para a sua m√°quina (caso voc√™ tenha subido uma vers√£o de um outro computador ou uma outra pessoa tenha subido uma atualiza√ß√£o).

---

# Resumo

1. Reposit√≥rio: Criar projeto/pacote

2. Adicionar Git

3. Adicionar GitHub

4. Commit: Edite e "Commite" as mudan√ßas no c√≥digo

5. Push: Suba os commits para o GitHub

6. Pull (extra): Baixe o estado atual do projeto

### Cuidados

- Se uma base de dados tem mais do que 50Mb de tamanho, ela n√£o deveria estar no seu reposit√≥rio.

- Nem sempre o comando Pull d√° certo. √Äs vezes, voc√™ e a colega de trabalho fizeram mudan√ßas no mesmo arquivo e, quando v√£o juntar, ocorre um conflito.

---
class: middle, center, inverse
name: testes-unitarios

# Comunica√ß√£o

---

.pull-left[
# O arquivo README.md 

O arquivo `README.md` √© importante pois cont√©m informa√ß√µes como: logo (opcional!), introdu√ß√£o (o que ele faz?), instru√ß√µes de instala√ß√£o, exemplos de uso, etc.
  
  
A fun√ß√£o `usethis::use_readme_rmd()` cria um arquivo `README.Rmd`. Esse arquivo j√° possui uma estrutura para facilitar o preenchimento das informa√ß√µes. 


O arquivo gerado √© um **RMarkdown** (`.Rmd`), e portanto precisamos converter para **Markdown** (`.md`). Para isso podemos usar a fun√ß√£o `devtools::build_readme()`.

&lt;!-- Citamos aqui o bot√£o knit? --&gt;
]

.pull-right[
&lt;img src="img/readme-chess.png" width="90%" style="display: block; margin: auto;" /&gt;

.footnote[Fonte da imagem: [README do pacote {chess}](https://github.com/curso-r/chess)]

]

---
.pull-left[



# Vignettes

√â muito comum a constru√ß√£o de *vignettes* para documentar o pacote. Elas s√£o documentos em HTML melhor formatados do que a tradicional documenta√ß√£o do R.

Voc√™ pode usar a fun√ß√£o `usethis::use_vignette()` para criar *vignettes*.

&lt;br&gt; 
Aten√ß√£o: Caso voc√™ use alguma distribui√ß√£o Linux e retornar a seguinte mensagem no `devtools::check()`, voc√™ precisa instalar o [qpdf](https://sourceforge.net/projects/qpdf/).


```
&gt; ‚Äòqpdf‚Äô is needed for checks on size
 reduction of PDFs
```

&lt;!-- ### Outros --&gt;

&lt;!-- Se voc√™ precisar construir sites, relat√≥rios, dashboards est√°ticos (flexdashboard) dentro do seu pacote, voc√™ pode criar uma pasta chamada `docs/` na raiz do seu projeto para guardar esses arquivos. --&gt;

&lt;!-- Veremos tamb√©m como criar um site do pacote criado com o `{pkgdown}`. --&gt;

]

.pull-right[
&lt;img src="img/vignette-chess.png" width="90%" style="display: block; margin: auto;" /&gt;

.footnote[Fonte da imagem: [Exemplo de vignette do pacote {chess}](https://github.com/curso-r/chess)]

]



---
# Github Pages

- Permite que seus HTMLs sejam mostrados como p√°ginas da web.

&lt;img src="img/ghpages.gif" width="80%" style="display: block; margin: auto;" /&gt;


---
# Pacotes/Projetos e GitHub



.pull-left[


Pacotes/Projetos do R e reposit√≥rios do GitHub s√£o melhores amigos



&lt;br&gt;

O grande cupido dessa amizade √© o `{usethis}` &lt;br&gt;

B√¥nus: Ap√≥s deixar o pacote no GitHub, outras pessoas poder√£o instal√°-lo usando a fun√ß√£o `remotes::install_github("org/repo")`
]

.pull-right[

&lt;img src="img/hug.gif" width="90%" style="display: block; margin: auto;" /&gt;

]

---
class: middle, center, inverse
name: ci

# Integra√ß√£o cont√≠nua

---
# Integra√ß√£o cont√≠nua

- Dado um certo c√≥digo e um m√©todo consistente de test√°-lo, faz todo sentido
**automatizar** o processo

- Integra√ß√£o cont√≠nua normalmente envolve garantir que a vers√£o mais
recente do software est√° atendendo os padr√µes de qualidade

- Hoje vamos falar sobre o **GitHub Actions** porque ele se conecta facilmente
com o GitHub

.pull-left[


Alguns exemplos: 

- V√°rios pacotes usam para fazer executar o check e testes: [{readr}](https://github.com/tidyverse/readr/tree/master/.github/workflows), [{dplyr}](https://github.com/tidyverse/dplyr/tree/master/.github/workflows), [{usethis}](https://github.com/r-lib/usethis/tree/master/.github/workflows), e muitos outros

- Pacote [{mananciais}](https://beatrizmilz.github.io/mananciais/) - atualiza diariamente a base de dados 

- P√°gina [Materiais sobre R](https://materiais-estudo-r.netlify.app/) - atualiza o site sempre que h√° mudan√ßa na base de dados



]

.pull-right[

&lt;br&gt;&lt;br&gt;

&lt;img src="https://avatars.githubusercontent.com/u/44036562?s=200&amp;v=4" style="display: block; margin: auto;" /&gt;

]

---
# GitHub Actions

&gt; GitHub Actions ajuda a automatizar tarefas dentro de seu ciclo de vida de
desenvolvimento de software https://docs.github.com/pt/actions

- Um **workflow** n√£o passa de um processo bem-definido que ser√° executado no
reposit√≥rio ao qual ele pertence

- Ele √© definido a partir de um arquivo YAML dentro da pasta `.github/workflows`

  - √â comum definir workflows para testagem de pacotes, gera√ß√£o de documenta√ß√£o, 
  atualiza√ß√£o de dados, etc.
  
- O workflow √©, essencialmente, um duende m√°gico que baixa o nosso reposit√≥rio
em um **servidor do GitHub** e executa os comandos especificados

  - O plano gratuito j√° funciona para bastante coisa, mas cuidado com os
  **custos** das m√°quinas MacOS

---
# Estrutura

- Um workflow tem alguns componentes importantes:

  - **Event**: gatilhos que ativam o workflow, podendo ser desde um push ao
  reposit√≥rio at√© uma hora do dia
  
  - **Job**: sequ√™ncias completas de comandos que podem ser executadas
  paralelamente entre si
  
  - **Step**: uma tarefa dentro de um job, composta por a√ß√µes
      
      - **Use**: passos importados de outro reposit√≥rio (√∫teis para setup)
  
  - **Action**: o √°tomo do workflow, um comando a ser executado pelo "duende
  m√°gico"
  
- Tamb√©m √© comum definir **env**, vari√°veis de ambiente para o workflow

---
# Exemplo de workflow

```yaml
on: [push]                                              # Event
jobs:
  R-CMD-check:                                          # Job
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2                       # Use
      - uses: r-lib/actions/setup-r@v1                  # Use
      - name: Install dependencies                      # Step
        run: |                                          # Action
          install.packages(c("remotes", "rcmdcheck"))
          remotes::install_deps(dependencies = TRUE)
        shell: Rscript {0}
      - name: Check                                     # Step
        run: rcmdcheck::rcmdcheck(args = "--no-manual") # Action
        shell: Rscript {0}
```

---
# Integra√ß√£o cont√≠nua com GitHub Actions

Para utilizar o GitHub Actions, usamos arquivos `.yaml` que armazenam informa√ß√µes os fluxos de trabalho.

- **Eventos**: Um evento √© uma atividade que aciona um fluxo de trabalho. Por exemplo:
  
  - Quando o reposit√≥rio recebe uma altera√ß√£o (`on: push`)
  
  - Quando um Pull Request √© criado (em outras palavras, algu√©m est√° enviando uma contribui√ß√£o para o reposit√≥rio) (`on: pull_request`)
  
  - Eventos programados. Ex: a cada hora, todos os dias, uma vez por semana, uma vez por m√™s, etc. O site [CronTab](https://crontab.guru/) √© muito √∫til para isso.
  
  - Quando acionado "manualmente", ou via API (`on: workflow_dispatch`)
  
- **Trabalho**: Um evento aciona automaticamente o fluxo de trabalho, que cont√©m um trabalho. Em seguida, o trabalho usa etapas para controlar a ordem em que as a√ß√µes s√£o executadas. Exemplo de a√ß√µes executadas:
  
  - Executar testes
  
  - Executar um script `.R`

---
# Integra√ß√£o cont√≠nua com GitHub Actions (cont.)

- Recomenda√ß√£o: partir de um arquivo de workflow j√° existente, e alterar o que for necess√°rio. 

  - [Neste reposit√≥rio](https://github.com/r-lib/actions/tree/master/examples#readme), est√£o dispon√≠veis alguns exemplos de workflows de GitHub Actions que podemos usar com pacotes em R

- Os arquivos `.yaml` devem estar em um diret√≥rio espec√≠fico do pacote:  `pacote/.github/workflows/nome-do-workflow.yaml`

- O pacote {usethis} tamb√©m pode nos ajudar nisso. O c√≥digo a seguir cria o arquivo `.yaml` apresentado no √∫ltimo slide, usado para fazer uma checagem simples no pacote:


```r
usethis::use_github_action("check-release")
```

---
# Exemplo de workflow 

&lt;img src="img/action.png" width="60%" style="display: block; margin: auto;" /&gt;

.footnote[[Veja os logs do Exemplo!](https://github.com/beatrizmilz/materiais_estudo_R/runs/2328985236?check_suite_focus=true)]

---
# Refer√™ncias  e materiais para estudo

- [Zen do R](https://curso-r.github.io/zen-do-r/), livro em desenvolvimento pela Curso-R.

- [R Packages](https://r-pkgs.org), livro aprofundado sobre desenvolvimento de pacotes.

- [R for Data Science - cap√≠tulo sobre Func√µes](https://r4ds.had.co.nz/functions.html)

- [Materiais da R-Ladies SP sobre a Hacktoberfest 2020](https://r-ladies-sao-paulo.github.io/2020-hacktoberfest/).

- [Folha de dicas do Git em Portugu√™s](https://training.github.com/downloads/pt_BR/github-git-cheat-sheet/)

---
class: middle, center, inverse

## Fim!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
